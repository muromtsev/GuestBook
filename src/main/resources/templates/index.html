<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guestbook</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link th:href="@{/css/style.css}" rel="stylesheet">
</head>
<body>
<div class="container py-5">
    <div class="guestbook-header text-center">
        <h1 class="guestbook-title">üìñ –ì–æ—Å—Ç–µ–≤–∞—è –∫–Ω–∏–≥–∞</h1>
        <p class="guestbook-subtitle">
            –û—Å—Ç–∞–≤—å—Ç–µ –≤–∞—à–∏ –ø–æ–∂–µ–ª–∞–Ω–∏—è, –æ—Ç–∑—ã–≤—ã –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ –¥–æ–±—Ä—ã–µ —Å–ª–æ–≤–∞.
        </p>
    </div>
    <div class="card guestbook-card">
        <div class="card-header bg-primary text-white text-center py-3">
            <h2>‚úçÔ∏è –î–æ–±–∞–≤–∏—Ç—å –∑–∞–ø–∏—Å—å</h2>
        </div>
        <div class="card-body p-4">
            <form th:action="@{/}" method="post" th:object="${entry}">
                <div class="mb-3">
                    <label for="authorName" class="form-label">–í–∞—à–µ –∏–º—è</label>
                    <input
                            type="text"
                            class="form-control"
                            id="authorName"
                            name="authorName"
                            placeholder="–í–∞—à–µ –∏–º—è"
                            th:field="*{authorName}"
                            required
                    >
                    <div th:if="${#fields.hasErrors('authorName')}" class="invalid-feedback d-block">
                        <span th:each="err : ${#fields.errors('authorName')}" th:text="${err}"></span>
                    </div>
                </div>
                <div class="mb-3">
                    <label for="email" class="form-label">Email</label>
                    <input
                            type="text"
                            class="form-control"
                            id="email"
                            name="email"
                            th:field="*{email}"
                            placeholder="username@yourmail.com"
                            required
                    >
                    <div th:if="${#fields.hasErrors('email')}" class="invalid-feedback d-block">
                        <span th:each="err : ${#fields.errors('email')}" th:text="${err}"></span>
                    </div>
                </div>
                <div class="mb-3">
                    <label for="message" class="form-label">–°–æ–æ–±—â–µ–Ω–∏–µ</label>
                    <textarea
                            class="form-control"
                            id="message"
                            name="message"
                            th:field="*{message}"
                            rows="4"
                            placeholder="–ù–∞–ø–∏—à–∏—Ç–µ –≤–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..."
                            required
                    ></textarea>
                    <div th:if="${#fields.hasErrors('message')}" class="invalid-feedback d-block">
                        <span th:each="err : ${#fields.errors('message')}" th:text="${err}"></span>
                    </div>
                </div>
                <div class="d-grid gap-2">
                    <button type="submit" class="btn btn-submit text-white py-2">
                        üì§ –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å
                    </button>
                </div>
            </form>
        </div><!--card-body-->
    </div><!--guestbook-card-->
    <!-- –°–ø–∏—Å–æ–∫ –∑–∞–ø–∏—Å–µ–π -->
    <div th:each="entry : ${entries}" class="card entry-card">
        <div class="card-body">
            <div class="d-flex align-items-start">
                <img th:src="${entry.getAvatarUrl()}"
                     src="https://api.dicebear.com/7.x/identicon/svg?seed=JohnDoe"
                     class="avatar me-3"
                     alt="–ê–≤–∞—Ç–∞—Ä">

                <div class="flex-grow-1">
                    <div class="d-flex justify-content-between align-items-center mb-2">
                        <span class="username" th:text="${entry.getAuthorName()}">–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤</span>
                        <small class="timestamp" th:text="${#temporals.format(entry.getCreatedAt(), 'dd.MM.yyyy HH:mm')}">01.01.2023 14:30</small>
                    </div>

                    <p class="message-text mb-0" th:text="${entry.getMessage()}">
                        –≠—Ç–æ –ø—Ä–∏–º–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –≥–æ—Å—Ç–µ–≤–æ–π –∫–Ω–∏–≥–µ. –ó–¥–µ—Å—å –º–æ–∂–µ—Ç –±—ã—Ç—å –¥–ª–∏–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—å—Å—è –Ω–∞ –Ω–æ–≤—É—é —Å—Ç—Ä–æ–∫—É.
                    </p>
                </div>
            </div>
        </div>
    </div>
</div><!--container-->

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å is-invalid –¥–ª—è –ø–æ–ª–µ–π —Å –æ—à–∏–±–∫–∞–º–∏
        const forms = document.querySelectorAll('form');
        forms.forEach(form => {
            const inputs = form.querySelectorAll('input, textarea');
            inputs.forEach(input => {
                input.addEventListener('input', function() {
                    if (this.value.trim() !== '') {
                        this.classList.remove('is-invalid');
                    }
                });
            });
        });
    });
</script>
</body>
</html>

